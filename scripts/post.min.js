!function(){"use strict";class e extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML='\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        width: 200px;\n        font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", Helvetica, Ubuntu, Roboto, Noto, "Segoe UI", Arial, sans-serif;\n        font-size: 13px;\n        font-weight: 400;\n        line-height: 1.4;\n      }\n      ol {\n        padding: 0 0 0 15px;\n        margin: 0;\n      }\n      li {\n        margin-bottom: 8px;\n        cursor: pointer;\n        opacity: 0.6;\n        transition: opacity 0.18s ease;\n      }\n      li.selected {\n        color: var(--title-color,#000);\n        opacity: 1;\n        font-weight: 600;\n      }\n      label {\n        margin-bottom: 8px;\n        opacity: 0.6;\n        display: block;\n        letter-spacing: 0.5px;\n      }\n      @media(hover: hover) {\n        li:hover {\n          opacity: 1;\n        }\n      }\n    </style>\n    <div id="container">\n      <label>Contents</label>\n      <ol></ol>\n    </div>\n    '}connectedCallback(){this.linkMap=new Map,this.reverseMap=new Map;const e=this.root.querySelector("ol");document.querySelectorAll("h2").forEach((t=>{const n=this._createItem(t.textContent);e.appendChild(n),this.linkMap.set(n,t),this.reverseMap.set(t,n),n.addEventListener("click",(e=>{e.stopPropagation();const t=this.linkMap.get(n);t&&(t.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"}),setTimeout((()=>this._resetHighlight()),500),setTimeout((()=>this._resetHighlight()),1e3))}));new IntersectionObserver((e=>{this._resetHighlight()}),{rootMargin:"0px 0px -65% 0px"}).observe(t)}))}_resetHighlight(){this._resetPending||(this._resetPending=!0,setTimeout((()=>{this._resetPending=!1;const e=.35*window.innerHeight,t=[],n=[];for(const o of this.reverseMap.keys()){const i=o.getBoundingClientRect().top;i<e&&(i<0?t.push({hNode:o,top:i}):n.push({hNode:o,top:i})),this.reverseMap.get(o).classList.remove("selected")}n.length?(n.sort(((e,t)=>e.top-t.top)),this.reverseMap.get(n[0].hNode).classList.add("selected")):t.length&&(t.sort(((e,t)=>t.top-e.top)),this.reverseMap.get(t[0].hNode).classList.add("selected"))}),200))}_createItem(e){const t=document.createElement("li");return t.textContent=e,t}}customElements.define("table-of-contents",e),function(){const e=document.querySelector("table-of-contents"),t=document.querySelector("header"),n=document.querySelector("main");let o=!1;const i=()=>{if(o){e.style.position="fixed",e.style.top="2.1rem";if(window.innerWidth<=1280)e.style.right="3.3333333%",e.style.left="";else{const o=t.getBoundingClientRect().width,i=n.getBoundingClientRect().width;e.style.left=i>=1470?(o-i)/2+"px":"3.3333333%",e.style.right=""}}else e.style.position="absolute",e.style.left="",e.style.right="",e.style.top=""};if(e&&t&&"IntersectionObserver"in window){new IntersectionObserver((e=>{const t=e[0];o=!t.isIntersecting||0===t.intersectionRatio,i()}),{threshold:[0,.5,1]}).observe(t)}window.addEventListener("resize",(()=>i()),{passive:!0})}()}();
